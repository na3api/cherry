<!DOCTYPE html>
<html lang="en">
    <head>
        <!-- META TAGS -->
        <!-- ========================================================= -->
        <meta charset="UTF-8">
        <meta name="viewport" content="width=820">
        <meta name="format-detection" content="telephone=no">	

        <!-- TITLE -->
        <!-- ========================================================= -->	
        <title>Canvas board</title>

        <!-- FAVICON -->
        <!-- ========================================================= -->
        <link rel="shortcut icon" href="">

        <!-- CSS -->
        <!-- ========================================================= -->	
        <link href="css/bootstrap.min.css" rel="stylesheet">
        <link href="css/validation.css" rel="stylesheet">
        <link href="css/bootstrap-responsive.min.css" rel="stylesheet">
        <!-- JQUERY FROM CDN -->
        <!-- ========================================================= -->
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
        <link href="http://fonts.googleapis.com/css?family=Open+Sans" rel="stylesheet" type="text/css">

        <script src="js/bootstrap.min.js"></script>

    </head>

    <body>
        <div class="body">
            <h1>Cherry.js</h1>
            <div class="buttons_block">
                <button id="stop" class="btn btn-primary"><span class="glyphicon glyphicon-pause" aria-hidden="true"></span></button>      
                <button id="next" class="btn btn-primary" disabled="disabled"><span class="glyphicon glyphicon-step-forward" aria-hidden="true"></span></button> 
                <button id="change_genertion" class="btn btn-success" >Change generation</button>
            </div>
            <canvas id="canvas" width="700" height="400"></canvas>

        </div>       
        <script src="js/cherry.js"></script>
        <script>
            cherry.init('#canvas', {width: 700, height: 400, frame: true}, function ($c) {
                $c.game_area.show();
                $c.game_menu.show($c.frame_count);

                /* $c.line([30,40],[[40,100],[50,50],[112, 112],[111,111]],{color:'#005999', width: '6',  lineJoin: 'round',lineCap: 'round'})
                 .line([100,100], {color:'#FF5999'})
                 .line([100, 30], {color:'green'})
                 .line([40, 50], {color: 'orange'});*/
                //p($c.images
                //$c.image($c.images.naruto_sprite, [70, 119, 28, 39, 30, 150, 28, 39]);  
                $c.player.show();
                return $c;
            }, {
                resources: {
                    naruto_sprite: 'file:///C:/Users/Фокстрот/Documents/NetBeansProjects/cherry/images/sprites/NArutoSprites.png',
                    naruto_sprite3: 'file:///C:/Users/Фокстрот/Documents/NetBeansProjects/cherry/images/sprites/NArutoSprites3.png'
                },
                player:{
                    state: 0,
                    last_change: 0, 
                    progress: 1, 
                    pos:[30, 150],
                    size:[37, 53],
                    animation: [
                        [17, 20],
                        [65, 20],
                        [114, 20],
                        [164, 20],
                    ],
                    show: function(){
                        if($c.lastTime - this.last_change > 200){
                            this.last_change = $c.lastTime;
                            this.state = this.state + this.progress;
                            if(this.animation[this.state] == undefined)
                            {
                                if(this.progress > 0)
                                    this.progress = -1;
                                else
                                    this.progress = 1;
                                
                                this.state = this.state + this.progress + this.progress;
                            }
                            
                        }
                        $c.image($c.images.naruto_sprite3, [this.pos, this.size, this.animation[this.state]]);
                    }
                },
                game_area: {
                    place: {x1: 20, y1: 20, x2: 500, y2: 350},
                    show: function () {
                        $c.rect(0, 0, 700, 400, {background: 'yellow', width: 1, line: 'black'}).rect(this.place.x1, this.place.y1, this.place.x2, this.place.y2, {background: 'white', width: 2, line: 'black'});
                    }
                },
                game_menu: {
                    place: {x1: 530, y1: 40, x2: 600, y2: 350},
                    show: function (user_score) {
                        $c.text('FIRST GAME', {stroke: true, position: [this.place.x1, this.place.y1], color: 'black', font: '24px Arial'})
                                .text('User score: ' + user_score, {position: [this.place.x1, this.place.y1 + 30], color: 'black'})
                    }
                }
            });
        </script>
    </body>
</html>